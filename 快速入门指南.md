# ğŸš€ å¿«é€Ÿå…¥é—¨æŒ‡å—

åœ¨ 5 åˆ†é’Ÿå†…å®Œæˆ Rust WASM å›¾ç‰‡å‹ç¼©æ¨¡å—çš„é›†æˆï¼Œæ€§èƒ½æå‡ **20-40%**ï¼

---

## ğŸ“‹ å‰ç½®è¦æ±‚

- âœ… **Node.js** v18+
- âœ… **Git**
- âœ… **Rust** (å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†)
- âœ… **wasm-pack** (å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†)

---

## ğŸ”§ 5 åˆ†é’Ÿå¿«é€Ÿé›†æˆ

### æ­¥éª¤ 1ï¼šå…‹éš†é¡¹ç›®

```bash
git clone https://github.com/fjqz177/pic-smaller.git
cd pic-smaller
```

### æ­¥éª¤ 2ï¼šä¸€é”®å®‰è£…

**Linux/macOS**:

```bash
# å®‰è£… Rust (å¦‚æœè¿˜æ²¡æœ‰)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env

# æ·»åŠ  WASM ç›®æ ‡
rustup target add wasm32-unknown-unknown

# å®‰è£… wasm-pack å’Œé¡¹ç›®ä¾èµ–
npm install -g wasm-pack
npm install

# æ„å»ºå¹¶é›†æˆ WASM
npm run wasm:full
```

**Windows**:

```powershell
# å®‰è£… Rust: è®¿é—® https://rustup.rs/

# åœ¨æ–°ç»ˆç«¯ä¸­æ‰§è¡Œï¼š
rustup target add wasm32-unknown-unknown
npm install -g wasm-pack
npm install
npm run wasm:full
```

### æ­¥éª¤ 3ï¼šå¯åŠ¨æµ‹è¯•

```bash
npm run dev
```

è®¿é—® http://localhost:3000 æµ‹è¯•å‹ç¼©åŠŸèƒ½ã€‚

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ ¼å¼         | æ—§ WASM | æ–° Rust WASM | æå‡       |
| ------------ | ------- | ------------ | ---------- |
| PNG (1080p)  | ~2.0s   | **~1.2s**    | â¬†ï¸ **40%** |
| AVIF (1080p) | ~3.5s   | **~2.8s**    | â¬†ï¸ **20%** |

---

## ğŸ¯ å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤                     | è¯´æ˜           |
| ------------------------ | -------------- |
| `npm run clean`          | æ¸…ç†æ„å»ºæ–‡ä»¶   |
| `npm run clean:all`      | æ¸…ç†æ‰€æœ‰ï¼ˆåŒ…æ‹¬ WASMï¼‰ |
| `npm run wasm:full`      | ä¸€é”®å®Œæˆæ‰€æœ‰æ“ä½œ |
| `npm run wasm:build`     | ä»…æ„å»º WASM æ¨¡å— |
| `npm run dev`            | å¯åŠ¨å¼€å‘æœåŠ¡å™¨   |
| `npm run build`          | ç”Ÿäº§æ„å»º         |

---

## âœ… æ£€æŸ¥æ¸…å•

- [ ] `public/wasm/` ç›®å½•åŒ…å« WASM æ–‡ä»¶
- [ ] `src/engines/PicCompressWasm.ts` å­˜åœ¨
- [ ] `vite.config.ts` åŒ…å« COOP/COEP headers
- [ ] å¼€å‘æœåŠ¡å™¨æ­£å¸¸å¯åŠ¨
- [ ] å›¾ç‰‡å‹ç¼©åŠŸèƒ½æ­£å¸¸

---

## ğŸ” æ•…éšœæ’é™¤

### wasm-pack æœªå®‰è£…

```bash
npm install -g wasm-pack
```

### Rust æœªå®‰è£…

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### WASM åŠ è½½å¤±è´¥

1. æ£€æŸ¥ `vite.config.ts` ä¸­çš„ headers é…ç½®
2. ç¡®ä¿ `public/wasm/` ç›®å½•å­˜åœ¨
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

### æ„å»ºå¤±è´¥

```bash
cd pic-compress-wasm
rm -rf pkg target
cd ..
npm run wasm:full
```

---

## ğŸ“– æ›´å¤šæ–‡æ¡£

- [`æµè§ˆå™¨æµ‹è¯•æŠ¥å‘Š.md`](./æµè§ˆå™¨æµ‹è¯•æŠ¥å‘Š.md) - æµè§ˆå™¨æµ‹è¯•æ­¥éª¤
- [`WASM_INTEGRATION.md`](./WASM_INTEGRATION.md) - è¯¦ç»†é›†æˆæ–‡æ¡£

---

**é›†æˆå®Œæˆï¼** ğŸ‰
